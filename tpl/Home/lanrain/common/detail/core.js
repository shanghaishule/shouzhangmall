/* shangou core.js Date:2014-10-31 17:36:13 */
/load_queen/.test(location.href)&&(console.info("loaded: core.js"),item.load.core_start=+new Date);
function EventTarget(){
    this._listeners={}
}
if(EventTarget.prototype={constructor:EventTarget,addListener:function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)},fire:function(a){if("string"==typeof a&&(a={type:a}),a.target||(a.target=this),!a.type)throw new Error("Event object missing 'type' property.");if(this._listeners[a.type]instanceof Array)for(var b=this._listeners[a.type],c=0,d=b.length;d>c;c++)b[c].call(this,a)},removeListener:function(a,b){if(this._listeners[a]instanceof Array)for(var c=this._listeners[a],d=0,e=c.length;e>d;d++)if(c[d]===b){c.splice(d,1);break}}},pageConfig.FN_getDomain=function(){var a=location.hostname;return/360buy.com/.test(a)?"360buy.com":"jd.com"},"undefined"==typeof G)var G=window.G={};!function(a){"object"==typeof pageConfig.product&&(a.sku=pageConfig.product.skuid,a.key=pageConfig.product.skuidkey,a.url=pageConfig.product.href,a.src=pageConfig.product.src,a.name=pageConfig.product.name,a.mdPerfix=1==pageConfig.product.type?"CR":"GR",a.mbPerfix=1==pageConfig.product.type?"3C":"GM",a.mp=pageConfig.product.mp,a.jp=pageConfig.product.jp,a.cat=pageConfig.product.cat,a.orginSku=pageConfig.product.orginSkuid||a.sku,a.isJd=a.sku<1e9,a.isPop=a.sku>1e9,a.isCellphone=655==pageConfig.product.cat[2]||6881==pageConfig.product.cat[2]||6882==pageConfig.product.cat[2],a.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},a.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},a.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},a.isNothing=function(b){return a.isArray(b)?b.length<1:!b},a.getRandomArray=function(a,b){return b=b||1,a.sort(function(){return Math.random()-.5}),a.slice(0,b)}),a.triggerLazyImg=function(a,b){a.find("img").each(function(){var a=$(this),c=a.attr(b);a.attr("src")||(a.attr("src",c),a.removeAttr(b),a.removeClass("err-product loading-style2"))})},a.getNewUserLevel=function(a){switch(a){case 50:return"\u6ce8\u518c\u7528\u6237";case 56:return"\u94dc\u724c\u7528\u6237";case 59:return"\u6ce8\u518c\u7528\u6237";case 60:return"\u94f6\u724c\u7528\u6237";case 61:return"\u94f6\u724c\u7528\u6237";case 62:return"\u91d1\u724c\u7528\u6237";case 63:return"\u94bb\u77f3\u7528\u6237";case 64:return"\u7ecf\u9500\u5546";case 110:return"VIP";case 66:return"\u4eac\u4e1c\u5458\u5de5";case-1:return"\u672a\u6ce8\u518c";case 88:return"\u94bb\u77f3\u7528\u6237";case 90:return"\u4f01\u4e1a\u7528\u6237";case 103:return"\u94bb\u77f3\u7528\u6237";case 104:return"\u94bb\u77f3\u7528\u6237";case 105:return"\u94bb\u77f3\u7528\u6237"}return"\u672a\u77e5"},a.sendRequest=function(a){var b=new Image;b.setAttribute("src",a),b=null},a.getNewCLK=function(b,c){var d="http://mercury.jd.com/log.gif?",e="src="+b.name+"$action="+b.action;b.csku&&(e+="$csku="+b.csku.join(",")),b.sku&&(e+="$sku="+b.sku),"undefined"!=typeof b.index&&(e+="$index="+b.index);var f={t:b.id||(1==pageConfig.product.type?"rec.993003":"rec.993001"),v:e,m:b.m||"UA-J2011-1",ref:b.ref||document.referrer,random:b.random||Math.random()};return"undefined"!=typeof c?d+$.param(f):void a.sendRequest(d+$.param(f))},a.clsLog=function(a,b,c,d,e){var f=new Image,g="http://mercury.jd.com/log.gif?t=rec."+a+"&v="+encodeURIComponent("src=rec$action="+b+"$enb=1$sku="+c+"$csku="+d+"$index="+(e||0)+"$expid=0")+"&m=UA-J2011-1&ref="+encodeURIComponent(document.referrer)+"&random="+Math.random();f.setAttribute("src",g)},a.onAttr=function(a,b){var c=pageConfig.product.specialAttrs;if(c&&c.length){for(var d=0;d<c.length;d++)if(c[d]==a)return b(),!0;return!1}return!1},a.calPrice=function(a){for(var b=(a.sku,a.input,a.$el.find('input[type="checkbox"]')),c=b.length,d=(a.$el,a.targetJP),e=a.targetMP,f=0,g=0,h=0,i=[],j=a.callback||function(){},k=0;c>k;k++){var l=b.eq(k),m=l.attr("data-sku"),n=l.attr("data-jp"),o=l.attr("data-mp");n=parseFloat(n),o=parseFloat(o),l.attr("checked")&&(isNaN(n)||(f+=n),isNaN(o)||(g+=o),i.push(m),h++)}d.html("\uffe5"+f.toFixed(2)),e.html("\uffe5"+g.toFixed(2)),j(h,i)},a.setScroll=function(a){var b=$("string"==typeof a?a:"body");b.find(".p-scroll").each(function(){var a=$(this).find(".p-scroll-wrap"),b=$(this).find(".p-scroll-next"),c=$(this).find(".p-scroll-prev");a.find("li").length>4&&$.fn.imgScroll&&a.imgScroll({showControl:!0,width:30,height:30,visible:4,step:1,prev:c,next:b})})},a.thumbnailSwitch=function(a,b,c,d,e){var f=a.find("img"),g=e||"mouseover";f.bind(g,function(){var d=$(this),e=d.attr("src"),f=e.replace(/\/n\d\//,c);b.attr("src",f),a.removeClass("curr"),d.parent().addClass("curr")})},a.serializeUrl=function(a){var b,c,d,e,f=a.indexOf("?"),g=a.substr(0,f),h=a.substr(f+1),i=h.split("&"),j=i.length,k={};for(b=0;j>b;b++)c=i[b].split("="),d=c[0],e=c[1],k[d]=e;return{url:g,param:k}}}(G),pageConfig.eventTarget=new EventTarget,pageConfig.Tip={$el:$("#summary-tips"),items:["","",""],set:function(a,b){b&&(this.items[a]=b,this.show())},show:function(){var a=this.items.length,b=0,c=[],d=this.$el.find("ol");for(b;a>b;b++)this.items[b]&&c.push("<li>"+this.items[b]+"</li>");c.length>0?(d.html(c.join("")),this.$el.show()):this.$el.hide()}},/load_queen/.test(location.href)&&(item.load.core_end=+new Date);
