/* shangou-v3 itemPage.js Date:2014-12-04 17:04:29 */
seajs.use(["shangou/v3/js/Libs/mustache.js","shangou/v3/js/Libs/base/unit/cookie/cookie.js","shangou/v3/js/Libs/base/ui/gotop/gotop.js","shangou/v3/js/Libs/base/unit/setUserInfo/setUserInfo.js","shangou/v3/js/Libs/base/ui/lazyload/lazyload.js","shangou/v3/js/Libs/base/unit/shortcut/shortcut.js","shangou/v3/js/Libs/base/ui/switchable/switchable.js"],function(a,b,c,d,e,f){seajs.use(["shangou/v3/js/Modules/utils.js","shangou/v3/js/Modules/DiscountRemindPanel.js","shangou/v3/js/Modules/Common.js","shangou/v3/js/Modules/StartRemindPanel.js","shangou/v3/js/Modules/event.js","shangou/v3/js/Modules/itemPage/magnifyingGlass.js","shangou/v3/js/Modules/itemPage/setAmount.js","shangou/v3/js/Modules/itemPage/commentsList.js"],function(a,b,c,e,g,h,i,j){f(),j.init(window.pageConfig.product.skuid,0).getData($("#comment-0"),0,0),$("#comments-list").switchable({event:"click",navSelectedClass:"curr",callback:function(a){var b=this.main.eq(a),c=0;c=1===a?3:3===a?1:a,0!==a&&"1"!==b.attr("data-loaded")&&(j.getData(b,c,0),b.attr("data-loaded","1"))}}),d(),$("body").lazyload({type:"img",source:"data-original"}),$("body").lazyload({type:"fn",source:$("#GLOBAL_FOOTER"),onchange:function(){jQuery.ajax({url:"http://d.item.jd.com/footer",data:{type:"shangou"},dataType:"jsonp",jsonpCallback:"showfooter",success:function(a){$("#GLOBAL_FOOTER").html(a.content)}})}}),$(".btn-customer-service").click(function(){var b=$(this).attr("pid");open("http://chat3.jd.com/index.action?pid="+b,b,"status=no,toolbar=no,menubar=no,location=no,titlebar=no,resizable=yes,width=1018px,height=590")});function k(a,b){var c=b?b:0,d=$(a).offset();$(document).scrollTop(d.top+c)}$(window).bind("scroll",function(){var b=$("body").scrollTop()||$("html").scrollTop(),c=$("#product-detail").offset().top;c>b?($("#warper_1").remove(),$("#product-detail .pd-fix").removeClass("pd-fix")):($("#product-detail .mt").addClass("pd-fix"),$("#warper_1").size()||$("#product-detail").prepend("<div id='warper_1' style='height:70px'><div>"))});var l=$("#product-detail .mt .tabs li");l.click(function(){l.removeClass("curr"),$(this).addClass("curr");l.index(this);switch(l.index(this)){case 0:k($("#product-detail")[0]);break;case 1:k($("#comment")[0],-50);break;case 2:k($("#aftermarket")[0],-50);break;case 3:k($("#recommend")[0])}}),$(".quick").hide();function m(a){var b=$("#product-detail .mt .tabs li");b.removeClass("curr"),b.eq(a).addClass("curr")}$(window).bind("scroll",function(){var b=$("body").scrollTop()||$("html").scrollTop();100>b?$(".quick").fadeOut(300):$(".quick").fadeIn(300);var c=$("#product-detail").offset(),d=$("#comment").offset(),e=$("#aftermarket").offset();b>c.top&&m(0),b>d.top-70&&m(1),b>e.top-70&&m(2)}),$(".quick [data-scroll]").bind("click",function(a){a.preventDefault();var b=$(this).data("scroll")||"html";$("html,body").animate({scrollTop:$(b).offset().top},400)})})});
